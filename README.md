# üéµ Spotify New Track Bot

–ë–æ—Ç —Å–ª–µ–¥–∏—Ç –∑–∞ –Ω–æ–≤—ã–º–∏ —Ä–µ–ª–∏–∑–∞–º–∏ –∞—Ä—Ç–∏—Å—Ç–æ–≤ –∏–∑ —Ç–≤–æ–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –≤ Spotify –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ç—Ä–µ–∫–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–ª–µ–π–ª–∏—Å—Ç.

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –∞—Ä—Ç–∏—Å—Ç–∞–º –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—ã –ø–æ–¥–ø–∏—Å–∞–Ω –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç **–ø–æ 1 —Ç—Ä–µ–∫—É** –∏–∑ –∏—Ö –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–ª–∏–∑–∞. –≠—Ç–æ –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫—É –æ—Ç—Å—á—ë—Ç–∞ ‚Äî —á—Ç–æ —Å—á–∏—Ç–∞—Ç—å "—Å—Ç–∞—Ä—ã–º", –∞ —á—Ç–æ "–Ω–æ–≤—ã–º".

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ `03:00` –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ—Ö –∞—Ä—Ç–∏—Å—Ç–æ–≤. –ï—Å–ª–∏ —É –∫–æ–≥–æ-—Ç–æ –≤—ã—à–µ–ª –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç **–≤—Å–µ —Ç—Ä–µ–∫–∏** –∏–∑ –Ω–µ–≥–æ –≤ –ø–ª–µ–π–ª–∏—Å—Ç.

### –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–∏–º–∏—Ç–æ–≤ Spotify
–ë–æ—Ç –Ω–µ —Å—á–∏—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å–∞–º ‚Äî –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ —É–ø–æ—Ä–∞ –∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç `429` –æ—Ç Spotify. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Retry-After`, –∂–¥—ë—Ç —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ —Å–∫–æ–ª—å–∫–æ —Å–∫–∞–∑–∞–ª Spotify, –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å —Ç–æ–≥–æ –∂–µ –º–µ—Å—Ç–∞. –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∞—Ä—Ç–∏—Å—Ç–∞ ‚Äî –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/—Ç–≤–æ–π_–Ω–∏–∫/spotify-new-track-bot.git
cd spotify-new-track-bot
```

### 2. –°–æ–∑–¥–∞–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux / macOS
source venv/bin/activate

pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π Spotify Developer App

1. –ó–∞–π–¥–∏ –Ω–∞ [developer.spotify.com/dashboard](https://developer.spotify.com/dashboard)
2. –ù–∞–∂–º–∏ **Create app**
3. –ó–∞–ø–æ–ª–Ω–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ (–ª—é–±—ã–µ)
4. –í –ø–æ–ª–µ **Redirect URIs** –¥–æ–±–∞–≤—å: `http://127.0.0.1:8888/callback`
5. –°–æ—Ö—Ä–∞–Ω–∏ –∏ –æ—Ç–∫—Ä–æ–π **Settings** ‚Äî —Ç–∞–º –±—É–¥—É—Ç `Client ID` –∏ `Client Secret`

### 4. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env`

–°–∫–æ–ø–∏—Ä—É–π `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```bash
cp .env.example .env
```

–û—Ç–∫—Ä–æ–π `.env` –∏ –≤—Å—Ç–∞–≤—å —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è. –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—é –Ω–∞–ø–∏—Å–∞–Ω—ã –ø—Ä—è–º–æ –≤ `.env.example`.

### 5. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞

```bash
python spotify_bot.py
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Spotify –ø–æ–ø—Ä–æ—Å–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏, —Å–∫–æ–ø–∏—Ä—É–π –µ—ë –≤ –±—Ä–∞—É–∑–µ—Ä, —Ä–∞–∑—Ä–µ—à–∏ –¥–æ—Å—Ç—É–ø, –∏ –≤—Å—Ç–∞–≤—å URL –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
spotify-new-track-bot/
‚îú‚îÄ‚îÄ spotify_bot.py      # –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt    # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example        # –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ (–∑–∞–ø–æ–ª–Ω–∏ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π –≤ .env)
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–æ—è–≤—è—Ç—Å—è –µ—â—ë –¥–≤–∞ —Ñ–∞–π–ª–∞ ‚Äî –æ–Ω–∏ –≤ `.gitignore` –∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –ø–æ–ø–∞–¥—É—Ç:
- `.env` ‚Äî —Ç–≤–æ–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
- `bot_state.json` ‚Äî —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –±–æ—Ç–∞
- `.cache` ‚Äî –∫–µ—à —Ç–æ–∫–µ–Ω–∞ Spotify

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω—É—Ç—Ä–∏ –±–æ—Ç–∞

–í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ `spotify_bot.py` –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å:

```python
RUN_TIME = "03:00"   # –≤—Ä–µ–º—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
SAFE_DELAY = 3       # –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
```

---

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

**–ù–µ —Ç—Ä–æ–≥–∞–π –ø–æ–¥–ø–∏—Å–∫–∏ –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.** –ë–æ—Ç –∏–¥—ë—Ç –ø–æ —Å–ø–∏—Å–∫—É –∞—Ä—Ç–∏—Å—Ç–æ–≤ –ø–æ –∏–Ω–¥–µ–∫—Å—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é. –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –∞—Ä—Ç–∏—Å—Ç–∞ –ø–æ–∫–∞ –∏–¥—ë—Ç –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Ö–æ–¥ ‚Äî –ø–æ–∑–∏—Ü–∏–∏ —Å–¥–≤–∏–Ω—É—Ç—Å—è –∏ –∫—Ç–æ-—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å—Å—è. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ `initial_scan_done` —Å—Ç–∞–ª `true` ‚Äî –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –º–µ–Ω—è—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏.

**–û—Å—Ç–∞–≤–ª—è–π –∫–æ–Ω—Å–æ–ª—å –æ—Ç–∫—Ä—ã—Ç–æ–π.** –ï—Å–ª–∏ Spotify –¥–∞—Å—Ç –¥–ª–∏–Ω–Ω—ã–π –ª–∏–º–∏—Ç (`Retry-After: 84000` —Å–µ–∫—É–Ω–¥ ‚Äî —Ç–∞–∫–æ–µ –±—ã–≤–∞–µ—Ç) ‚Äî –±–æ—Ç –±—É–¥–µ—Ç —Å–ø–∞—Ç—å –∏ –∂–¥–∞—Ç—å. –ó–∞–∫—Ä—ã–≤–∞—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–µ –Ω—É–∂–Ω–æ, –æ–Ω —Å–∞–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç. –ü—Ä–æ–≥—Ä–µ—Å—Å –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω, –∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Å –Ω—É–∂–Ω–æ–≥–æ –º–µ—Å—Ç–∞.

**–û–¥–∏–Ω –∑–∞–ø—É—Å–∫ –≤ —Å—É—Ç–∫–∏.** –ë–æ—Ç –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –µ—Å–ª–∏ —É–∂–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª —Å–µ–≥–æ–¥–Ω—è. –≠—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ Spotify.

---

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- [spotipy](https://spotipy.readthedocs.io/) ‚Äî Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Spotify Web API
- [schedule](https://schedule.readthedocs.io/) ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- [python-dotenv](https://pypi.org/project/python-dotenv/) ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ `.env` —Ñ–∞–π–ª–∞
- [requests](https://pypi.org/project/requests/) ‚Äî HTTP-–∑–∞–ø—Ä–æ—Å—ã

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
